<!doctype html>
<html>
<head>
<meta charset="utf-8">
<!--<meta name="viewport" content="user-scalable=0">-->
<title>Peso Bambino 0-24 Mesi</title>
<script src="js/Chart.bundle.min.js"></script>
  <link rel="stylesheet" href="jqm/jquery.mobile-1.4.5.min.css">
  <script src="jqm/jquery-1.10.2.min.js"></script>
  <script src="jqm/jquery.mobile-1.4.5.min.js"></script>
<style>
body {  
  padding: 16px;
}

canvas {
  border: 1px dotted red;
}

.chart-container {
  position: relative;
  margin: auto;
  height: 90vh;
  width: 95vw;
}

</style>
</head>

<body>
<div data-role="page" id="">

    <div data-role="popup" id="sql" data-dismissible="false" style="max-width:100%">
        <div class="chart-container">
            <canvas id="chart"></canvas>
        </div>
    </div>
</div>

<script>
var ctx = document.getElementById("chart").getContext('2d');
var prova = 70;
var valori ="[";
valori += localStorage.getItem("pesoM");
valori += ']';
var obj = valori.replace(",]","]");
obj = JSON.parse(obj);

var scatterChart = new Chart(ctx, {
    type: 'scatter',
    data: {
        datasets: [{
            label: '3 percentile',
			fill: false,
			backgroundColor: "rgba(255,0,0,0.2)",
            borderColor: "rgba(255,0,0,1)",
            borderWidth: 2,
            data: [{
                x: 0,
                y: 2.5
            }, {
                x: 1,
                y: 3.45
            }, {
                x: 2,
                y: 4.40
            }, {
                x: 3,
                y: 5.1
            }, {
                x: 4,
                y: 5.65
            }, {
                x: 5,
                y: 6.04
            }, {
                x: 6,
                y: 6.42
            }, {
                x: 7,
                y: 6.71
            }, {
                x: 8,
                y: 7
            }, {
                x: 9,
                y: 7.23
            }, {
                x: 10,
                y: 7.45
            }, {
                x: 11,
                y: 7.65
            }, {
                x: 12,
                y: 7.85
            }, {
                x: 13,
                y: 8.01
            }, {
                x: 14,
                y: 8.17
            }, {
                x: 15,
                y: 8.33
            }, {
                x: 16,
                y: 8.49
            }, {
                x: 17,
                y: 8.65
            }, {
                x: 18,
                y: 8.81
            }, {
                x: 19,
                y: 8.97
            }, {
                x: 20,
                y: 9.13
            }, {
                x: 21,
                y: 9.29
            }, {
                x: 22,
                y: 9.45
            }, {
                x: 23,
                y: 9.61
            }, {
                x: 24,
                y: 9.77
            }]
        },
		{
            label: '15 percentile',
			fill: false,
			backgroundColor: "rgba(0,0,0,0.2)",
            borderColor: "rgba(0,0,0,1)",
            borderWidth: 1,
            data: [{
                x: 0,
                y: 2.90
            }, {
                x: 1,
                y: 3.90
            }, {
                x: 2,
                y: 4.90
            }, {
                x: 3,
                y: 5.65
            }, {
                x: 4,
                y: 6.2
            }, {
                x: 5,
                y: 6.65
            }, {
                x: 6,
                y: 7.1
            }, {
                x: 7,
                y: 7.4
            }, {
                x: 8,
                y: 7.7
            }, {
                x: 9,
                y: 7.95
            }, {
                x: 10,
                y: 8.2
            }, {
                x: 11,
                y: 8.4
            }, {
                x: 12,
                y: 8.6
            }, {
                x: 13,
                y: 8.78
            }, {
                x: 14,
                y: 8.96
            }, {
                x: 15,
                y: 9.14
            }, {
                x: 16,
                y: 9.32
            }, {
                x: 17,
                y: 9.50
            }, {
                x: 18,
                y: 9.68
            }, {
                x: 19,
                y: 9.86
            }, {
                x: 20,
                y: 10.04
            }, {
                x: 21,
                y: 10.22
            }, {
                x: 22,
                y: 10.40
            }, {
                x: 23,
                y: 10.58
            }, {
                x: 24,
                y: 10.76
            }]
        },
		{
            label: '50 percentile',
			fill: false,
			backgroundColor: "rgba(160,160,160,0.2)",
            borderColor: "rgba(160,160,160,1)",
            borderWidth: 1,
			borderDash: [20, 30],
            data: [{
                x: 0,
                y: 3.35
            }, {
                x: 1,
                y: 4.50
            }, {
                x: 2,
                y: 5.60
            }, {
                x: 3,
                y: 6.35
            }, {
                x: 4,
                y: 7
            }, {
                x: 5,
                y: 7.45
            }, {
                x: 6,
                y: 7.9
            }, {
                x: 7,
                y: 8.25
            }, {
                x: 8,
                y: 8.6
            }, {
                x: 9,
                y: 8.88
            }, {
                x: 10,
                y: 9.15
            }, {
                x: 11,
                y: 9.4
            }, {
                x: 12,
                y: 9.65
            }, {
                x: 13,
                y: 9.86
            }, {
                x: 14,
                y: 10.07
            }, {
                x: 15,
                y: 10.28
            }, {
                x: 16,
                y: 10.49
            }, {
                x: 17,
                y: 10.7
            }, {
                x: 18,
                y: 10.91
            }, {
                x: 19,
                y: 11.12
            }, {
                x: 20,
                y: 11.33
            }, {
                x: 21,
                y: 11.54
            }, {
                x: 22,
                y: 11.75
            }, {
                x: 23,
                y: 11.96
            }, {
                x: 24,
                y: 12.17
            }]
        },
		{
            label: '85 percentile',
			fill: false,
			backgroundColor: "rgba(0,0,0,0.2)",
            borderColor: "rgba(0,0,0,1)",
            borderWidth: 1,
            data: [{
                x: 0,
                y: 3.85
            }, {
                x: 1,
                y: 5.15
            }, {
                x: 2,
                y: 6.35
            }, {
                x: 3,
                y: 7.2
            }, {
                x: 4,
                y: 7.85
            }, {
                x: 5,
                y: 8.38
            }, {
                x: 6,
                y: 8.9
            }, {
                x: 7,
                y: 9.28
            }, {
                x: 8,
                y: 9.65
            }, {
                x: 9,
                y: 9.95
            }, {
                x: 10,
                y: 10.25
            }, {
                x: 11,
                y: 10.53
            }, {
                x: 12,
                y: 10.8
            }, {
                x: 13,
                y: 11.04
            }, {
                x: 14,
                y: 11.28
            }, {
                x: 15,
                y: 11.52
            }, {
                x: 16,
                y: 11.76
            }, {
                x: 17,
                y: 12
            }, {
                x: 18,
                y: 12.24
            }, {
                x: 19,
                y: 12.48
            }, {
                x: 20,
                y: 12.72
            }, {
                x: 21,
                y: 12.96
            }, {
                x: 22,
                y: 13.20
            }, {
                x: 23,
                y: 13.44
            }, {
                x: 24,
                y: 13.68
            }]
        },
		{
            label: '97 percentile',
			fill: false,
			backgroundColor: "rgba(255,0,0,0.2)",
            borderColor: "rgba(255,0,0,1)",
            borderWidth: 2,
            data: [{
                x: 0,
                y: 4.3
            }, {
                x: 1,
                y: 5.7
            }, {
                x: 2,
                y: 7
            }, {
                x: 3,
                y: 7.9
            }, {
                x: 4,
                y: 8.65
            }, {
                x: 5,
                y: 9.18
            }, {
                x: 6,
                y: 9.7
            }, {
                x: 7,
                y: 10.13
            }, {
                x: 8,
                y: 10.55
            }, {
                x: 9,
                y: 10.9
            }, {
                x: 10,
                y: 11.25
            }, {
                x: 11,
                y: 11.55
            }, {
                x: 12,
                y: 11.85
            }, {
                x: 13,
                y: 12.12
            }, {
                x: 14,
                y: 12.39
            }, {
                x: 15,
                y: 12.66
            }, {
                x: 16,
                y: 12.93
            }, {
                x: 17,
                y: 13.20
            }, {
                x: 18,
                y: 13.47
            }, {
                x: 19,
                y: 13.74
            }, {
                x: 20,
                y: 14.01
            }, {
                x: 21,
                y: 14.28
            }, {
                x: 22,
                y: 14.55
            }, {
                x: 23,
                y: 14.82
            }, {
                x: 24,
                y: 15.09
            }]
        },
		{
            label: 'Il mio bimbo',
			fill: false,
			radius: 4,
			backgroundColor: "rgba(51,153,255,0.2)",
            borderColor: "rgba(51,153,255,1)",
            borderWidth: 5,
            data: obj
        }]
    },
	
    options: {
		title: {
            display: true,
            text: 'Peso Bambino 0-24 Mesi'
        },
		elements: {
             point: {
                radius: 0,
                backgroundColor: 'rgba(200,250,0)'
             }
        },
		legend: {
            display: true,
            labels: {	
			    boxWidth: 2,
                fontColor: 'rgb(0, 0, 0)'
            }
        },
		stacked: false,
        scales: {
            xAxes: [{
                type: 'linear',
                position: 'bottom',
			    ticks: {
                    min: 0,
                    max: 24,
                    stepSize: 1
                },
				scaleLabel: {
                   display: true,
                   labelString: 'età (mesi)'
                }
            }],
			yAxes: [{
                type: 'linear',
				position: 'left',
                ticks: {
                    stepSize: 2,
                    callback: function(value, index, values) {
                        return value + 'Kg';
                    }
                }
            }]
        }
    }
});
    </script>

<script>
// Bind an event to window.orientationchange that, when the device is turned,
// gets the orientation and displays it to on screen.
$( window ).on( "orientationchange", function( event ) {
	
  if (event.orientation == "landscape") {
	  $("#sql").popup("open");
  } else if (event.orientation == "portrait") {
	  $( "#sql" ).popup( "close" );
  }
});
 
// You can also manually force this event to fire.
$( window ).orientationchange();
</script>
</body>
</html>
